/* 0.5.0 */
var FeedbackOne=(e=>{var o=Object.defineProperty,r=Object.defineProperties,N=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable,W=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t=t||{})H.call(t,r)&&W(e,r,t[r]);if(n)for(var r of n(t))U.call(t,r)&&W(e,r,t[r]);return e},f=(e,t)=>r(e,N(t)),$=(e,t)=>{var r={};for(o in e)H.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&n)for(var o of n(e))t.indexOf(o)<0&&U.call(e,o)&&(r[o]=e[o]);return r},p=(e,a,l)=>new Promise((t,r)=>{var o=e=>{try{i(l.next(e))}catch(e){r(e)}},n=e=>{try{i(l.throw(e))}catch(e){r(e)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,n);i((l=l.apply(e,a)).next())});let i="feedbackone";function z(e){var[e]=e.split(".").map(Number);return e}function V(){try{var e=localStorage.getItem(i);return null===e?null:JSON.parse(e).reporter}catch(e){return console.warn("Failed to get reporter from localStorage",e),null}}let l=customElements,s=HTMLElement,{hasAttribute:G,setAttribute:B,removeAttribute:J,getAttribute:a}=s.prototype,{apply:c,setPrototypeOf:q,construct:Z}=Reflect,X=Object.defineProperties,{get:Y,define:K,whenDefined:Q}=CustomElementRegistry.prototype,ee=Object.getOwnPropertyDescriptor(Node.prototype,"isConnected").get;function te(e,t){return new Set([...e.observedAttributes].filter(e=>!t.observedAttributes.has(e)))}function re(e,t,r){let{observedAttributes:o,attributeChangedCallback:n}=r;if(0!==o.size&&n){let o=te(t,r);0!==o.size&&X(e,{setAttribute:{value:function(e,t){var r;o.has(e)?(r=a.call(this,e),B.call(this,e,t),n.call(this,e,r,(e=>{try{return String(e)}catch(e){}return""})(t))):B.call(this,e,t)},writable:!0,enumerable:!0,configurable:!0},removeAttribute:{value:function(e){var t;o.has(e)?(t=a.call(this,e),J.call(this,e),n.call(this,e,t,null)):J.call(this,e)},writable:!0,enumerable:!0,configurable:!0}})}}let d,g=new WeakMap,h=new WeakMap,oe=new WeakMap,ne=new Map,w=new Map,m=new Map,ie=new Map,ae=new Map,b=new Map;function v(r,e,t,o){q(r,t.LatestCtor.prototype),g.set(r,t),t!==e&&re(r,e,t),d=r,Z(t.LatestCtor,o||[]);let{observedAttributes:n,attributeChangedCallback:i}=t;0<n.size&&i&&0<(o=te(e,t)).size&&o.forEach(e=>{var t;G.call(r,e)&&(t=a.call(r,e),i.call(r,e,null,t))}),c(ee,r,[])&&null!=(e=t.disconnectedCallback)&&e.call(r)}function le(e){if(!e||!e.prototype||"object"!=typeof e.prototype)throw new TypeError("The referenced constructor is not a constructor.");let t=oe.get(e);return t||(t=(e=>{var{connectedCallback:t,disconnectedCallback:r,adoptedCallback:o,attributeChangedCallback:n,formAssociatedCallback:i,formDisabledCallback:a,formResetCallback:l,formStateRestoreCallback:s}=e.prototype;return{LatestCtor:e,connectedCallback:t,disconnectedCallback:r,adoptedCallback:o,formAssociatedCallback:i,formDisabledCallback:a,formResetCallback:l,formStateRestoreCallback:s,attributeChangedCallback:n,observedAttributes:new Set(e.observedAttributes||[]),formAssociated:e.formAssociated||!1}})(e),oe.set(e,t)),t}function y(...e){if(!new.target)throw new TypeError("Failed to construct 'HTMLElement': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(new.target!==y){var t=d;if(t)return d=void 0,t;t=this.constructor,t=m.get(t);if(t&&t.PivotCtor)return new t.PivotCtor(t,e)}throw new TypeError("Illegal constructor")}y.prototype=s.prototype,Object.assign(CustomElementRegistry.prototype,{get(...e){if(this!==l)throw new TypeError("Illegal invocation");var t=e["0"];return c(Y,this,e)&&(null==(e=w.get(t))?void 0:e.LatestCtor)},define(...e){if(this!==l)throw new TypeError("Illegal invocation");var r,o,{0:e,1:t,2:n}=e;if(n&&n.extends)throw new DOMException("NotSupportedError: ");let i=c(Y,this,[e]);if(i&&i!==(null==(n=w.get(e))?void 0:n.PivotCtor))throw new DOMException(`Failed to execute 'define' on 'CustomElementRegistry': the name "${e}" has already been used with this registry`);let a=le(t);if(m.get(t))throw new DOMException("Failed to execute 'define' on 'CustomElementRegistry': this constructor has already been used with this registry");w.set(e,a),m.set(t,a),(i=ne.get(e))||(i=(r=a,o=e,(n=class extends s{constructor(e,t){if(super(),e)return v(this,r,e,t),this;(e=w.get(o))?v(this,r,e):(h.set(this,r),q(this,y.prototype))}connectedCallback(){var e=g.get(this);if(e)null!=(e=e.connectedCallback)&&e.call(this);else{let e=b.get(o);e||b.set(o,e=new Set),e.add(this)}}disconnectedCallback(){var e=g.get(this);e?null!=(e=e.disconnectedCallback)&&e.call(this):(e=b.get(o))&&e.delete(this)}adoptedCallback(){var e=g.get(this);null!=(e=null==e?void 0:e.adoptedCallback)&&e.call(this)}formAssociatedCallback(){var e=g.get(this);null!=(e=null==e?void 0:e.formAssociatedCallback)&&e.apply(this,arguments)}formDisabledCallback(){var e=g.get(this);null!=(e=null==e?void 0:e.formDisabledCallback)&&e.apply(this,arguments)}formResetCallback(){var e=g.get(this);null!=(e=null==e?void 0:e.formResetCallback)&&e.apply(this,arguments)}formStateRestoreCallback(){var e=g.get(this);null!=(e=null==e?void 0:e.formStateRestoreCallback)&&e.apply(this,arguments)}attributeChangedCallback(...e){var t=g.get(this);(r===t||null!=t&&t.observedAttributes.has(e[0]))&&null!=(t=t.attributeChangedCallback)&&t.apply(this,e)}}).observedAttributes=r.observedAttributes,n.formAssociated=r.formAssociated,n),ne.set(e,i),c(K,this,[e,i])),a.PivotCtor=i;n=b.get(e),n&&(b.delete(e),n.forEach(e=>{var t=h.get(e);t&&(h.delete(e),v(e,t,a))})),n=ae.get(e);n&&n(t)},whenDefined(...e){if(this!==l)throw new TypeError("Illegal invocation");let o=e["0"];return c(Q,this,e).then(()=>{let e=ie.get(o);if(!e){var r=w.get(o);if(r)return Promise.resolve(r.LatestCtor);let t;e=new Promise(e=>{t=e}),ie.set(o,e),ae.set(o,t)}return e})},constructor:y}),window.HTMLElement=y;let C=Object.keys;function x(e){return"string"==typeof e}function se(e){return"number"==typeof e}function k(e){return"object"==typeof e?null!==e:E(e)}function E(e){return"function"==typeof e}function S(e,t){if(e)for(var r of C(e))t(e[r],r)}let ce={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0},de=["Webkit","ms","Moz","O"],ue=(C(ce).forEach(t=>{de.forEach(e=>{ce[e+(e=t).charAt(0).toUpperCase()+e.substring(1)]=0})}),Symbol.for("jsx-dom:type"));(t=fe||{}).ShadowRoot="ShadowRoot";var fe=t;let pe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xlink",he="http://www.w3.org/XML/1998/namespace";function we(e){return"boolean"!=typeof e&&null!=e}function me(t){return Array.isArray(t)?t.map(me).filter(Boolean).join(" "):k(t)?Symbol.iterator in t?me(Array.from(t)):C(t).filter(e=>t[e]).join(" "):we(t)?""+t:""}let be={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0},ve=/^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;function ye(e){var t=document.createDocumentFragment();return T(e.children,t),t}function R(e,t){let r=t,o=r.children,n=$(r,["children"]);n.namespaceURI||0!==be[e]||(n=f(u({},n),{namespaceURI:pe}));let i;if(x(e)){i=n.namespaceURI?document.createElementNS(n.namespaceURI,e):document.createElement(e);var a,l=n,s=i;for(a of C(l))((r,o,n)=>{switch(r){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":return ke(n,ge,I(r,":"),o);case"xmlnsXlink":return j(n,I(r,":"),o);case"xmlBase":case"xmlLang":case"xmlSpace":return ke(n,he,I(r,":"),o)}switch(r){case"htmlFor":return j(n,"for",o);case"dataset":return S(o,(e,t)=>{null!=e&&(n.dataset[t]=e)});case"innerHTML":case"innerText":case"textContent":return we(o)&&(n[r]=o);case"dangerouslySetInnerHTML":return k(o)&&(n.innerHTML=o.__html);case"value":if(null==o||n instanceof window.HTMLSelectElement)return;if(n instanceof window.HTMLTextAreaElement)return n.value=o;break;case"spellCheck":return n.spellcheck=o;case"class":case"className":return E(o)?o(n):j(n,"class",me(o));case"ref":case"namespaceURI":return;case"style":return function t(r,e){null!=e&&!1!==e&&(Array.isArray(e)?e.forEach(e=>t(r,e)):x(e)?r.setAttribute("style",e):k(e)&&S(e,(e,t)=>{0===t.indexOf("-")?r.style.setProperty(t,e):se(e)&&0!==ce[t]?r.style[t]=e+"px":r.style[t]=e}))}(n,o);case"on":case"onCapture":return S(o,(e,t)=>{n.addEventListener(t,e,"onCapture"===r)})}if(E(o)){if("o"===r[0]&&"n"===r[1]){let t=r.toLowerCase();var e=t.endsWith("capture");if("ondoubleclick"===t?t="ondblclick":e&&"ondoubleclickcapture"===t&&(t="ondblclickcapture"),e||null!==n[t])if(e)n.addEventListener(t.substring(2,t.length-7),o,!0);else{let e;e=t in window?t.substring(2):t[2]+r.slice(3),n.addEventListener(e,o)}else n[t]=o}}else k(o)?n[r]=o:!0===o?j(n,r,""):!1!==o&&null!=o&&(n instanceof SVGElement&&!ve.test(r)?j(n,I(r,"-"),o):j(n,r,o))})(a,l[a],s);if(T(o,i),i instanceof window.HTMLSelectElement&&null!=n.value)if(!0===n.multiple&&Array.isArray(n.value)){let t=n.value.map(e=>String(e));i.querySelectorAll("option").forEach(e=>e.selected=t.includes(e.value))}else i.value=n.value;Ce(n.ref,i)}else{if(!E(e))throw new TypeError("Invalid JSX element type: "+e);k(e.defaultProps)&&(n=u(u({},e.defaultProps),n)),i=(t=e)&&t.isComponent?(t=e,c=n,d=o,t=new t(c=f(u({},c),{children:d})),d=t.render(),"ref"in c&&Ce(c.ref,t),d):e(f(u({},n),{children:o}))}var c,d;return i}function Ce(e,t){var r;k(r=e)&&"current"in r?e.current=t:E(e)&&e(t)}function T(e,t){var r;if(k(r=e)&&"number"==typeof r.length&&"number"!=typeof r.nodeType){var o,n=t;for(o of[...e])T(o,n)}else x(e)||se(e)?xe(document.createTextNode(e),t):null===e?xe(document.createComment(""),t):(r=e)&&"number"==typeof r.nodeType?xe(e,t):null!=(r=e)&&r[ue]===fe.ShadowRoot&&(r=t.attachShadow(e.attr),T(e.children,r),Ce(e.ref,r))}function xe(e,t){(t instanceof window.HTMLTemplateElement?t.content:t).appendChild(e)}function I(e,t){return e.replace(/[A-Z]/g,e=>t+e.toLowerCase())}function j(e,t,r){e.setAttribute(t,r)}function ke(e,t,r,o){e.setAttributeNS(t,r,o)}let Ee="0.5.0",O="https://form.feedback.one",A="feedback-one",Se=`.f1-default-trigger {
  align-items: center;
  background: #fff;
  box-shadow:
    0 6px 16px 0 rgb(0 0 0 / 8%),
    0 3px 6px -4px rgb(245 234 234 / 12%),
    0 9px 28px 8px rgb(0 0 0 / 5%);
  box-sizing: border-box;
  border-radius: 8px 0 0 8px;
  display: flex;
  height: 40px;
  padding: 4px;
  position: fixed;
  right: 0;
  top: calc(50vh - 20px);
  width: 40px;
  z-index: 2147483647;
}

.f1-default-trigger__button {
  align-items: center;
  background: #f6f6f6;
  box-sizing: border-box;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  height: 32px;
  padding: 0;
  width: 32px;
}

.f1-default-trigger__button:hover {
  background: #ebebeb;
}

.f1-default-trigger__button:focus {
  outline-color: #3d3d3d;
}

.f1-default-trigger__button:focus + .f1-default-trigger__tooltip,
.f1-default-trigger__button:hover + .f1-default-trigger__tooltip {
  opacity: 1;
  visibility: visible;
}

.f1-default-trigger__tooltip {
  background: #3d3d3d;
  border-radius: 4px;
  color: #fff;
  font-family:
    "Inter",
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    sans-serif;
  font-size: 14px;
  left: -240%;
  line-height: 20px;
  opacity: 0;
  padding: 4px 8px;
  position: absolute;
  transition: opacity 0.1s ease-in-out;
  visibility: hidden;
  z-index: 2147483647;
}

.f1-default-trigger__tooltip::after {
  content: "";
  border-top: 8px solid transparent;
  border-bottom: 8px solid transparent;
  border-left: 8px solid #3d3d3d;
  position: absolute;
  right: -6px;
  /* Vertically center an element with absolute position. */
  top: 50%;
  transform: translateY(-50%);
}

.f1-default-trigger__icon {
  /* (HK) TODO: Modify the SVG to be mirrored without applying CSS */
  transform: rotateY(180deg);
}

.f1-dialog {
  /* Reset native dialog styles */
  border: none;
  max-width: none;
  padding: 0;

  /* Styles for proper positioning of the dialog element */
  margin: 0 0 0 auto;
  min-height: 100dvh;

  box-shadow: rgb(0 0 0 / 20%) 0px 4px 8px;
  overscroll-behavior: contain;
  width: 400px;
}

.f1-dialog::backdrop {
  background: rgba(0, 0, 0, 0.32);
}

.f1-iframe {
  background: white;
  border: none;
  min-height: 100dvh;
  position: absolute;
  right: 0;
  top: 0;
  width: 100%;
}

@media only screen and (max-width: 480px) {
  .f1-dialog {
    width: 100%;
  }
}
`;function Re(){return R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"#3d3d3d",viewBox:"0 0 256 256",class:"f1-default-trigger__icon",children:[R("path",{d:"M232,120a40,40,0,0,1-40,40H152V80h40A40,40,0,0,1,232,120Z",opacity:"0.2"}),R("path",{d:"M240,120a48.05,48.05,0,0,0-48-48H152.2c-2.91-.17-53.62-3.74-101.91-44.24A16,16,0,0,0,24,40V200a16,16,0,0,0,26.29,12.25c37.77-31.68,77-40.76,93.71-43.3v31.72A16,16,0,0,0,151.12,214l11,7.33A16,16,0,0,0,186.5,212l11.77-44.36A48.07,48.07,0,0,0,240,120ZM40,199.93V40h0c42.81,35.91,86.63,45,104,47.24v65.48C126.65,155,82.84,164.07,40,199.93Zm131,8,0,.11-11-7.33V168h21.6ZM192,152H160V88h32a32,32,0,1,1,0,64Z"})]})}var t,M=null;function P(e,t,r,o){return 0!==e[4*(o*r+t)+3]}function Te(e){var t=e.getContext("2d"),r=e.width,e=e.height,o=t.getImageData(0,0,r,e).data,r={top:0,right:0,bottom:0,left:0,width:r,height:e},e=(r.top=((e,t)=>{for(var r=t.top;r<t.height-t.bottom;r+=1)for(var o=t.left;o<t.width-t.right;o+=1)if(P(e,o,r,t.width))return r;return t.top})(o,r),r.right=((e,t)=>{for(var r=t.width-t.right-1;r>t.left;--r)for(var o=t.top;o<t.height-t.bottom;o+=1)if(P(e,r,o,t.width))return t.width-r;return t.right})(o,r),r.bottom=((e,t)=>{for(var r=t.height-t.bottom-1;r>t.top;--r)for(var o=t.left;o<t.width-t.right;o+=1)if(P(e,o,r,t.width))return t.height-r;return t.bottom})(o,r),r.left=((e,t)=>{for(var r=t.left;r<t.width-t.right;r+=1)for(var o=t.top;o<t.height-t.bottom;o+=1)if(P(e,r,o,t.width))return r;return t.left})(o,r),r.width-r.right-r.left+1),o=r.height-r.bottom-r.top+1,t=t.getImageData(r.left,r.top,e,o),r={padding:[0,0,0,0]}.padding,n=r[0],i=r[3],e={width:e+i+r[1],height:o+n+r[2],startX:i,startY:n},i=(o=e.width,r=e.height,(M=M||document.createElement("canvas")).width=o,M.height=r,M.style.width=o+"px",M.style.height=r+"px",M.getContext("2d").clearRect(0,0,o,r),M);return i.getContext("2d").putImageData(t,e.startX,e.startY),i}function Ie(){return p(this,null,function*(){let{value:s,error:e}=yield function(){return p(this,null,function*(){try{return{value:yield navigator.mediaDevices.getDisplayMedia({preferCurrentTab:!0,audio:!1,video:{frameRate:60,height:{ideal:2*window.screen.height},width:{ideal:2*window.screen.width}}}),error:null}}catch(e){return{value:null,error:e}}})}();if(null!==e)return{value:null,error:e};let r=2*window.screen.height,o=2*window.screen.width,c=(s.getVideoTracks().forEach(e=>{var{height:e,width:t}=e.getSettings();r=Math.max(r,null!=e?e:0),o=Math.max(o,null!=t?t:0)}),document.createElement("video")),d=(Object.assign(c,{srcObject:s,autoplay:!1,muted:!0,playsInline:!0,height:r,width:o}),document.createElement("canvas"));return Object.assign(d,{height:r,width:o}),new Promise((a,l)=>{c.addEventListener("loadeddata",()=>p(this,null,function*(){var t,{videoWidth:e,videoHeight:r}=c;try{yield c.play(),t=500,yield new Promise(e=>setTimeout(e,t));var o,n,i=d.getContext("2d");null===i?(o=new Error("Unable to get canvas context."),l({value:null,error:o})):(i.drawImage(c,0,0,e,r),s.getVideoTracks().forEach(e=>e.stop()),n=Te(d).toDataURL("image/webp"),a({value:n,error:null}))}catch(e){l({value:null,error:e})}}))})})}function je(e){var t,r,o,i,n=e;n=`${A}[data-project-id="${n.projectId}"]`,null!==(n=document.querySelector(n))&&n.remove(),i=e,customElements.define(A,(({projectId:t,showDefaultTrigger:r,onRender:o,onTriggerClick:n,onDialogClick:i,onIframeLoad:a})=>class extends HTMLElement{constructor(){super();var e=this.attachShadow({mode:"closed"}),t=this.render();e.appendChild(t),o(e)}render(){var e=z(Ee),e=O+`/v${e}/`+t;return R(ye,{children:[R("style",{children:Se}),r&&R("div",{class:"f1-default-trigger",children:[R("button",{class:"f1-default-trigger__button",onClick:n,children:R(Re,{})}),R("div",{class:"f1-default-trigger__tooltip",role:"tooltip",children:"Feedback"})]}),R("dialog",{class:"f1-dialog",onClick:i,children:R("iframe",{class:"f1-iframe",src:e,referrerPolicy:"origin",onLoad:a})})]})}})({projectId:i.projectId,showDefaultTrigger:i.showDefaultTrigger,onRender:e=>{var t=o=i;if(t.shadowRootRef=e,t.showDefaultTrigger){var r=e.querySelector(".f1-default-trigger__button");if(null===r)throw console.warn(`Project with id ${t.projectId} encountered an issue`),new Error("Failed to create default trigger.");t.defaultTriggerRef=r}if(null===(r=e.querySelector(".f1-dialog")))throw console.warn(`Project with id ${t.projectId} encountered an issue`),new Error("Failed to create dialog.");if(t.dialogRef=r,null===(e=e.querySelector(".f1-iframe")))throw console.warn(`Project with id ${t.projectId} encountered an issue`),new Error("Failed to create iframe.");t.iframeRef=e;var o,n=o;n.windowMessageEventAbortController=new AbortController,window.addEventListener("message",e=>{var t;t=n,(e=e).origin!==window.origin&&null!==e.source&&null!==t.iframeRef.contentWindow&&e.source===t.iframeRef.contentWindow&&e.origin===O&&function(){p(this,arguments,function*({instance:t,source:r,origin:o,message:e}){var n=e.action;switch(n){case"READY":for(t.isIframeReady=!0;0<t.pendingMessagesToIframe.length;){var{source:i,origin:a,message:l}=t.pendingMessagesToIframe.shift();_({instance:t,source:i,origin:a,message:l})}break;case"CAPTURE_SCREENSHOT":var{value:s,error:c}=yield function(r){return p(this,null,function*(){try{Oe(r);var{value:e,error:t}=yield Ie();return null!==t?{value:null,error:t}:{value:e,error:null}}finally{L(r)}})}(t);if(null!==c){var{instance:c,source:d,origin:u,error:f}=[{instance:t,source:r,origin:o,error:c}][0];let e;f.name,e="Either the device doesn't support screen capture or the necessary permissions were denied.",_({instance:c,source:d,origin:u,message:{action:"CAPTURE_SCREENSHOT_FAILURE",payload:{screenshotError:e}}})}else _({instance:t,source:r,origin:o,message:{action:"CAPTURE_SCREENSHOT_SUCCESS",payload:{screenshotDataUrl:s}}});break;case"CLOSE_FORM":Oe(t);break;default:console.warn(`Unhandled action: "${n}"`)}})}({instance:t,source:e.source,origin:e.origin,message:e.data})},{signal:n.windowMessageEventAbortController.signal})},onTriggerClick:e=>{L(i)},onDialogClick:e=>{var t;t=i,e.target!==t.iframeRef&&Oe(t)},onIframeLoad:e=>{var t=r=i;if(null===t.iframeRef.contentWindow)throw console.warn(`Project with id ${t.projectId} encountered an issue`),new Error("Failed to send SDK version to iframe. Context window is not available.");_({instance:t,source:t.iframeRef.contentWindow,origin:O,message:{action:"SET_SDK_VERSION",payload:{sdkVersion:Ee}}}),Ae(r);var r,t=r;if(null===t.iframeRef.contentWindow)throw console.warn(`Project with id ${t.projectId} encountered an issue`),new Error("Failed to send device info to iframe. Context window is not available.");_({instance:t,source:t.iframeRef.contentWindow,origin:O,message:{action:"SET_DEVICE_INFO",payload:{deviceInfo:JSON.stringify({userAgent:window.navigator.userAgent})}}})}})),n=e,(o=document.createElement(A)).dataset.projectId=n.projectId,document.body.appendChild(o),(r=e).persistent&&new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&0<e.removedNodes.length&&(e=`${A}[data-project-id="${r.projectId}"]`,null===document.querySelector(e))&&F(r.initOptions)})}).observe(document.body,{childList:!0}),t=e,document.addEventListener("click",e=>{e=e.target;null!==e&&e instanceof HTMLElement&&e.dataset&&void 0!==e.dataset.f1Trigger&&L(t)})}function _({instance:e,source:t,origin:r,message:o}){var n,i;e.isIframeReady?({action:n,payload:i}=o,t.postMessage({action:n,payload:i,version:z(Ee)},r)):e.pendingMessagesToIframe.push({source:t,origin:r,message:o})}function Oe(e){var t;e.dialogRef.close(),document.body.style.overflow=null!=(t=e.originalBodyOverflow)?t:"initial",e.showDefaultTrigger&&e.defaultTriggerRef.blur()}function L(e){e.dialogRef.showModal(),e.originalBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden";if(null===e.iframeRef.contentWindow)throw console.warn(`Project with id ${e.projectId} encountered an issue`),new Error("Failed to send page URL to iframe. Context window is not available.");_({instance:e,source:e.iframeRef.contentWindow,origin:O,message:{action:"SET_PAGE_URL",payload:{pageUrl:window.location.href}}})}function Ae(e){if(null===e.iframeRef.contentWindow)throw console.warn(`Project with id ${e.projectId} encountered an issue`),new Error("Failed to send SET_REPORTER message to iframe. Context window is not available.");var t=null!=(t=null!=(t=e.reporter)?t:V())?t:{email:""};_({instance:e,source:e.iframeRef.contentWindow,origin:O,message:{action:"SET_REPORTER",payload:{email:t.email}}})}let D={};function F(e){var t;D.initOptions=e,D.isIframeReady=!1,D.pendingMessagesToIframe=[],D.reporter=V(),Object.assign(D,{projectId:e.projectId,persistent:null==(t=e.persistent)||t,showDefaultTrigger:null==(t=e.showDefaultTrigger)||t}),je(D)}function Me(e){if(!D.projectId)throw new Error('No project found. Add data-project-id="..." attribute or use FeedbackOne.init() with the corresponding project id.');D.reporter={email:e.email},Ae(D);e=D.reporter;try{var t=localStorage.getItem(i),r=null!==t?JSON.parse(t):{};localStorage.setItem("feedbackone",JSON.stringify(f(u({},r),{reporter:e})))}catch(e){console.warn("Failed to store reporter to localStorage",e)}}function Pe(){if(!D.projectId)throw new Error('No project found. Add data-project-id="..." attribute or use FeedbackOne.init() with the corresponding project id.');D.reporter=null;var e=D,t="CLEAR_REPORTER";if(null===e.iframeRef.contentWindow)throw console.warn(`Project with id ${e.projectId} encountered an issue`),new Error(`Failed to send ${t} message to iframe. Context window is not available.`);_({instance:e,source:e.iframeRef.contentWindow,origin:O,message:{action:t,payload:null}});try{var r,o,n=localStorage.getItem(i);null!==n&&((r=JSON.parse(n)).reporter,o=$(r,["reporter"]),localStorage.setItem("feedbackone",JSON.stringify(u({},o))))}catch(e){console.warn("Failed to remove reporter from localStorage",e)}}function _e(){if(!D.projectId)throw new Error('No project found. Add data-project-id="..." attribute or use FeedbackOne.init() with the corresponding project id.');L(D)}return null!==document.currentScript&&void 0!==document.currentScript.dataset.projectId&&F({projectId:(t=document.currentScript.dataset).projectId,persistent:"false"!==t.persistent,showDefaultTrigger:"false"!==t.showDefaultTrigger}),window.FeedbackOne={identify:Me,init:F,show:_e,unidentify:Pe},e.identify=Me,e.init=F,e.show=_e,e.unidentify=Pe,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e})({});
